/* -----------------------
 * iFrame Auto Size Script
 * -----------------------
 * This script is used to create auto sizing iFrames, even if they are served from a different domain.
 * NB: This script needs to be loaded into the parent page AND the embedded page so you need access to include the script on the iFrame domain
 *
 * Usage: http://scripts.deependmelbourne.com.au/iFrameAutoSize.html
 * 
 * Author: Rick Lannan, Deepend
 * Version: 1.0 
 * References: http://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content
 * Copyright (C): Rick Lannan, 2013 
 * Distibution & Modification: GNU License, please give credit
 */
var iFrameAutoSize={iFrame:null,loader:null,adjustWidth:false,currHeight:0,currWidth:0,sizeAdjusted:false,frameLoaded:false,create:function(e){var t={domId:e&&e.domId?e.domId:"",iFrameUrl:e&&e.iFrameUrl?e.iFrameUrl:"",resizeHelperUrl:e&&e.resizeHelperUrl?e.resizeHelperUrl:"",loaderUrl:e&&e.loaderUrl?e.loaderUrl:"",waitForPageLoad:e&&e.waitForPageLoad?e.waitForPageLoad:false,adjustWidth:e&&e.adjustWidth?e.adjustWidth:false,initialWidth:e&&e.initialWidth?e.initialWidth:"100%",initialHeight:e&&e.initialHeight?e.initialHeight:"0px",additionalCSS:e&&e.additionalCSS?e.additionalCSS:""};if(t.domId&&t.iFrameUrl&&t.resizeHelperUrl){var n=document.getElementById(t.domId);if(n){function r(){if(t.adjustWidth)iFrameAutoSize.adjustWidth=t.adjustWidth;iFrameAutoSize.iFrame=document.getElementById("iFrameAutoSize-"+t.domId);if(!iFrameAutoSize.iFrame){iFrameAutoSize.iFrame=document.createElement("IFRAME");iFrameAutoSize.iFrame.style.width=t.initialWidth;iFrameAutoSize.iFrame.style.height=t.initialHeight;iFrameAutoSize.iFrame.style.border=0;iFrameAutoSize.iFrame.setAttribute("frameborder",0);iFrameAutoSize.iFrame.setAttribute("frameBorder",0);iFrameAutoSize.iFrame.setAttribute("border",0);iFrameAutoSize.iFrame.setAttribute("cellspacing",0);iFrameAutoSize.iFrame.setAttribute("marginwidth",0);iFrameAutoSize.iFrame.setAttribute("marginheight",0);iFrameAutoSize.iFrame.setAttribute("scrolling","no");iFrameAutoSize.iFrame.setAttribute("id","iFrameAutoSize-"+t.domId);n.appendChild(iFrameAutoSize.iFrame)}iFrameAutoSize.iFrame.setAttribute("src",t.iFrameUrl+(t.iFrameUrl.indexOf("?")==-1?"?":"&")+(t.resizeHelperUrl?"helperUrl="+encodeURIComponent(t.resizeHelperUrl):""))}if(t.loaderUrl){iFrameAutoSize.loader=document.createElement("IMG");iFrameAutoSize.loader.setAttribute("src",t.loaderUrl);iFrameAutoSize.loader.style.display="block";iFrameAutoSize.loader.style.margin="0 auto";iFrameAutoSize.loader.setAttribute("id","iFrameAutoSize-loader");n.appendChild(iFrameAutoSize.loader)}if(t.waitForPageLoad){iFrameAutoSize.helpers.addDomEvent(window,"load",r)}else{r()}}}},forceParentFrame:function(e){var t={parentUrl:e&&e.parentUrl?e.parentUrl:""};if(t.parentUrl&&window.self===window.top){window.location.href=t.parentUrl+(t.parentUrl.indexOf("?")==-1?"?":"&")+"frameUrl="+encodeURIComponent(window.location.href)}},resize:function(e){var t={resizeHelperUrl:e&&e.resizeHelperUrl?e.resizeHelperUrl:"",domId:e&&e.domId?e.domId:"",resizeOnLoadOnly:e&&e.resizeOnLoadOnly?e.resizeOnLoadOnly:false,waitForPageLoad:e&&e.waitForPageLoad?e.waitForPageLoad:false};if(!t.resizeHelperUrl){t.resizeHelperUrl=decodeURIComponent(iFrameAutoSize.helpers.getQueryStringParam(window.location.search,"helperUrl"))}if(t.resizeHelperUrl){function n(){var e=iFrameAutoSize.helpers.getPageDimensions();if(t.domId){e=iFrameAutoSize.helpers.getDimensions(t.domId)}var r=document.getElementById("iFrameAutoSizePipe");if(!r){r=document.createElement("IFRAME");r.style.width=0;r.style.height=0;r.setAttribute("frameborder",0);r.setAttribute("id","iFrameAutoSizePipe");r.setAttribute("visibility","hidden");document.body.appendChild(r)}if(e.height!=iFrameAutoSize.currHeight||e.width!=iFrameAutoSize.currWidth){iFrameAutoSize.currWidth=e.width;iFrameAutoSize.currHeight=iFrameAutoSize.frameLoaded?e.height:0;if(!iFrameAutoSize.sizeAdjusted){r.setAttribute("src",t.resizeHelperUrl+"?height="+iFrameAutoSize.currHeight+"&width="+iFrameAutoSize.currWidth+"&cacheb="+Math.random())}if(!iFrameAutoSize.frameLoaded){iFrameAutoSize.frameLoaded=true}else{iFrameAutoSize.sizeAdjusted=true}}else{iFrameAutoSize.sizeAdjusted=false}if(!t.resizeOnLoadOnly||!iFrameAutoSize.frameLoaded)setTimeout(n,100)}if(t.waitForPageLoad){iFrameAutoSize.helpers.addDomEvent(window,"load",n)}else{n()}}},helpers:{resizeIFrame:function(e,t){if(iFrameAutoSize.iFrame){iFrameAutoSize.iFrame.style.height=parseInt(t)+"px";if(iFrameAutoSize.adjustWidth){iFrameAutoSize.iFrame.style.width=parseInt(e)+"px"}else{iFrameAutoSize.iFrame.style.width="100%"}}if(iFrameAutoSize.loader&&t>1){iFrameAutoSize.loader.style.display="none"}},addDomEvent:function(e,t,n){if(e==null||e==undefined)return;if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}else{e["on"+t]=n}},getPageDimensions:function(){var e=document;return{width:Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth)),height:Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}},getDimensions:function(e){var t=document.getElementById(e);if(t){return{width:Math.max(Math.max(t.scrollWidth,t.offsetWidth),t.clientWidth),height:Math.max(Math.max(t.scrollHeight,t.offsetHeight),t.clientHeight)}}else{return getPageDimensions()}},getQueryStringParam:function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+t+"=([^&#]*)";var r=new RegExp(n);var i=r.exec(e);if(i==null){return""}else{return i[1]}}}};